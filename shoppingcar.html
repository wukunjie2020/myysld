<!DOCTYPE html><html><head><meta charset="UTF-8"><title></title><link rel="stylesheet" type="text/css" href="css/shoppingcar.css"><link rel="stylesheet" type="text/css" href="css/public.css"><link rel="stylesheet" type="text/css" href="css/index-header.css"><link rel="stylesheet" type="text/css" href="css/index.footer.css"><style type="text/css">body,html{height:100%}</style><style type="text/css">body,html{height:100%}#loginBox,#welcomeBox{display:none}</style></head><body style="margin:auto;max-width:1366px;box-sizing:border-box;position:relative"><div class="main"><header class="header" style="max-width:1366px"><div class="header-inner"><!--左侧图标--><div class="header-inner-left fl"><a href="https://www.esteelauder.com.cn/" target="_blank"></a></div><!--右侧--><div class="header-inner-right fr"><div class="textDiv fl" id="loginBox"><span>登 录/注 册</span></div><div class="textDiv fl" id="welcomeBox"><span id="usernameSpan"></span> <input type="button" value="注销" id="btnLogout"></div><div class="header-inner-right-img1 fl"><img src="img/ia_200000066.png"></div><div class="header-inner-right-img2 fl"><img src="img/ia_200000068.png"><div class="search1"><input type="text" class="search2"><div class="gou"><img src="img/gou1.jpg"></div><div class="list1"><ul><li><h5>人气搜索关键词：</h5></li><li>小棕瓶精华</li><li>小棕瓶眼霜</li><li>倾慕唇膏</li><li>明星水粉底</li><li>万能面霜</li></ul></div></div></div></div><!--中间区域--><div class="header-inner-medium fl"><!--上半部分--><div class="header-inner-medium-top"><a href="https://www.esteelauder.com.cn/"></a></div><!--下半部分--><ul><li><a href="">官网臻享</a></li><li class="content-1">护肤<div class="drop-down-menu-1"><!--此处需要添加一个点击×关闭的事件--><div class="close">×</div><ul class="float-l"><li><ul class="rowGap"><li><span>产品类型</span></li><li><a href="">洁面&卸妆</a></li><li><a href="">精华水</a></li><li><a href="">精华</a></li><li><a href="">眼霜</a></li><li><a href="">面霜</a></li><li><a href="">面膜</a></li></ul></li><li><ul class="rowGap"><li><span>肌肤需求</span></li><li><a href="">修护肌底</a></li><li><a href="">提拉轮廓</a></li><li><a href="">多效润养</a></li><li><a href="">凝时紧致</a></li><li><a href="">排浊保湿</a></li><li><a href="">晶透沁白</a></li></ul></li><li><ul class="rowGap"><li><span>明星系列</span></li><li><a href="">小棕瓶修护系列</a></li><li><a href="">专研紧塑系列</a></li><li><a href="">多效智研系列</a></li><li><a href="">弹力多肽系列</a></li><li><a href="">红石榴润养系列</a></li><li><a href="">沁水倍润系列</a></li><li><a href="">晶透沁白系列</a></li></ul></li><li style="text-align:center" class="xiaoshou"><div><a href=""><img src="img/xiaotu1.jpg"><div><span>樱花水限量版<br>不刷酸不薄皮<br>买200享350ml</span></div></a></div></li></ul></div></li><li class="content-1">彩妆<div class="drop-down-menu-2"><!--此处需要添加一个点击×关闭的事件--><div class="close">×</div><ul class="float-l"><li><ul class="rowGap"><li><span>底妆</span></li><li><a href="">粉底液/妆前乳</a></li><li><a href="">气垫</a></li><li><a href="">粉饼</a></li><li><a href="">遮瑕</a></li><li><a href="">腮红</a></li></ul></li><li><ul class="rowGap"><li><span>唇妆</span></li><li><a href="">唇膏</a></li><li><a href="">唇釉/唇彩</a></li><li><span>眼妆</span></li><li><a href="">眉笔</a></li><li><a href="">眼影</a></li><li><a href="">眼线</a></li><li><a href="">睫毛膏</a></li></ul></li><li><ul class="rowGap"><li><span>明星系列</span></li><li><a href="">持久无暇系列</a></li><li><a href="">沁水系列</a></li><li><a href="">倾慕系列</a></li><li><a href="">倾慕修护系列</a></li><li><a href="">花漾系列</a></li></ul></li><li style="text-align:center" class="xiaoshou"><div><a href=""><img src="img/xiaotu2.jpg"><div><span>持妆粉底液<br>重新定义真正持妆<br>限时彩妆4件礼</span></div></a></div></li></ul></div></li><li><a href="">香氛</a></li><li><a href="">奢宠白金</a></li><li><a href="">AERIN</a></li><li><a href="">畅销榜单</a></li><li><a href="">挚爱美礼</a></li><li><a href="">会员权益</a></li><li><a href="">Estée Stories</a></li></ul></div></div></header><div class="main-1 clear"><div class="main-left fl"><div class="promo-panel"><a href=""><img src="img/sample_viewcart_promo_151106.png"></a></div><div class="viewcart-panel"><div class="message">恭喜！您的订单已经符合<span style="font-weight:700">免运费标准</span>。</div><div class="top-viewcart-buttons"><span class="fl">您的购物车</span> <a href="shoppinglist.html" class="shopping1">继续购物</a> <span>或</span> <a href="" class="money1">继续结账</a></div></div><div class="nullshopping"><div class="cart-header"><div class="products">产品</div><div class="qty">数量</div><div class="price">价格</div><div class="total">总计</div></div><!-- <div class="cart-item clear"> --><!-- <div class="cart-item-product clear">
                            <a href="">
                                <img src="img/el_sku_RL4301_144x198_0.jpg" />
                            </a>
                        </div>
                        <div class="cart-item-miaoshu">
                            <div>
                                <a href="">白金级花菁萃紧颜焕亮乳霜</a>
                            </div>
                            <div class="one">
                                <a href="">Re-Nutriv</a>
                            </div>
                            <div>
                                <span>容量: 50ml</span>
                            </div>
                            <div class="two">
                                <input class="deleteCls remove" type="button" value="移除" />
                            </div>
                        </div>
                        <div class="cart-item-count">
                            <input class="reduceCls" type="button" value="－" />
                            <span>1</span>
                            <input class="addCls" type="button" value="＋" />
                        </div>
                        <div class="cart-item-price">
                            2500
                        </div>
                        <div class="cart-item-zongji">
                            2500
                        </div> --><!-- </div> --><!-- <div class="xiahuaxian clear">

                    </div>
                    <div class="cart-items-bottom">
                        <div class="left1">
                            优惠代码
                            <input type="text" class="text01" />
                            <input type="button" value="确认优惠代码" class="btn01" />
                            <br />
                            <br />
                            <p>每张订单只能使用一个优惠代码</p>
                        </div>
                        <div class="right1 fr">
                            小计:<span id="totalMoney">2500</span>
                        </div>
                    </div> --><!-- <div class="bottom-viewcart-buttons">
                        <a href="" class="shopping">继续购物</a>
                        <span>或</span>
                        <a href="" class="money1">继续结账</a>
                    </div> --></div><div class="bottom_contents"><span class="spanOne">推荐搭配 </span><span>购买记录 </span><span>我收藏的</span><div class="content"><ul><li class="fl"><div class="same"><a href=""><img src="img/el_sku_P31R01_144x198_0.jpg"></a><div class="item_info"><div class="subhead"><a href="">鲜活亮采红石榴清润水</a></div><div class="price">￥420.00</div><div class="add_button"><input type="button" value="加入购物车"></div></div></div></li><li class="fl"><div class="same"><a href=""><img src="img/el_sku_REGY01_144x198_0.jpg"></a><div class="item_info"><div class="subhead"><a href="">肌透修护密集精华眼膜</a></div><div class="price">￥300.00</div><div class="add_button"><input type="button" value="加入购物车"></div></div></div></li><li class="fl"><div class="same"><a href=""><img src="img/el_sku_RNRH01_144x198_0.jpg"></a><div class="item_info"><div class="subhead"><a href="">白金级花菁萃紧颜精粹水</a></div><div class="price">￥880.00</div><div class="add_button"><input type="button" value="加入购物车"></div></div></div></li></ul></div></div></div><div class="main-right fl"><div class="pay_problem"><h3>支付过程中遇到的问题？</h3><div class="every_block"><p class="online_service"><img src="img/livechat_chatperson.png"> 在线客服</p><div>我们的在线客服顾问</div><div>将为您及时 <a href="#">解答疑问>></a></div></div><div class="every_block"><p class="live_phone"><img src="img/livechat_phone.png"> 服务热线</p><div><span>400-820-7000</span></div></div><p class="service_hours">服务时间 <span>上午9:00-晚上24:00</span></p></div><div class="zhiliang"><h3><p>雅诗兰黛</p><p>官方认可的质量保证</p></h3></div><div class="bz_all"><div class="bz_img"><img src="img/esteelauder_logo.jpg"><p class="padbottom">官方网站正品保证</p><p class="desbottom">此标志代表雅诗兰黛官方授权零售商，因此您可以放心在此购买雅诗兰黛商品。</p></div><div class="dashbottom"><img src="img/esteelauder_lock.jpg"><p class="padbottom"><a href="">隐私及个人安全</a></p><p class="desbottom">雅诗兰黛尊重您的隐私更重视与您的关系。您的任何交易及个人信息，均享有绝对的安全保证。</p></div><div class="dashbottom"><img src="img/chinapay.jpg"><p class="padbottom">安全的支付方式</p><p class="desbottom">采用最令人信赖的网络支付方式中国银联、支付宝和微信支付并确保您所有的在线支付100%安全。</p></div><div class="dashbottom"><img src="img/7daysreturn.jpg"><p class="padbottom">7天无理由退换货</p><p class="desbottom">安心便捷的退换货服务详细内容请参加<br><a href="">退换货政策。</a></p></div><div class="dashbottom-1"><img src="img/ems_fedex.jpg"><p class="padbottom">送货服务</p><p class="desbottom">我们仅选用最卓越的、信赖的物流合作伙伴</p></div></div></div></div></div><footer class="footer clear"><div class="footer-top clear"><div class="footer-top-left fl"><div class="footer-top-left-one fl"><!--此处短个上拉的列表--><div class="list2"><span></span><div class="list2-left"><h3>你的美丽专讯</h3><p>新品上市，时尚潮流，个性专属，为你呈现。让你时刻化身最热咨询达人。</p><a href="">立即浏览</a></div><div class="list2-right"><img src="img/164x161_foot1_180228.jpg"> <span>扫码关注<br>雅诗兰黛官方微信</span></div></div><a href="" class="changeC">订阅品牌咨询</a></div><div class="footer-top-left-two fl"><div class="list3"><span></span><div class="list3-left fl"><h3>注册</h3><input type="email" placeholder="邮箱地址" class="email1"> <input type="button" value="提交" class="tijiao"><p>已经有帐号了？立即&nbsp;&nbsp;<a href="">登录</a></p></div><div class="list3-middle fl"><img src="img/xiaotu1.jpg"> <span>樱花水限量版<br>不刷酸不薄皮<br>预售买200享350ml </span><a href="">查看详情</a></div><div class="list3-right fl"><img src="img/xiaotu2.jpg"> <span>明星修护组<br>细腻·匀亮·澎弹<br>限时奢享15件美礼 </span><a href="">查看详情</a></div></div><a href="" class="changeC1">限时礼遇</a></div></div><div class="footer-top-right fr"><div class="footer-top-right-one fl"><a href="" class="changeC2">免费递送与退换</a></div><div class="footer-top-right-two fl"><a href="" class="changeC3">专柜导航</a></div></div></div><div class="footer-medium clear"><div class="footer-about fl"><h3>关于雅诗兰黛</h3><ul><li><a href="" class="changeC4">品牌故事</a></li><li><a href="" class="changeC4">公司信息</a></li></ul></div><div class="footer-help fl"><h3>提供帮助</h3><ul><li><a href="" class="changeC4">美丽咨询</a></li><li><a href="" class="changeC4">官方商城服务热线</a></li><li><a href="" class="changeC4">400-820-7000 (9:00-24:00)</a></li><li><a href="" class="changeC4">积分及权益咨询热线</a></li><li><a href="" class="changeC4">400-820-8976 (9:00-18:00)</a></li></ul></div><div class="footer-customer fl"><h3>客户服务</h3><ul><li><a href="" class="changeC4">退换货问题</a></li><li><a href="" class="changeC4">查看我的订单</a></li><li><a href="" class="changeC4">常见问题</a></li><li><a href="" class="changeC4">配送信息</a></li><li><a href="" class="changeC4">更多</a></li></ul></div><div class="footer-findus fl"><h3>找到我们</h3><ul><li><a href="" class="changeC5">专柜导航</a></li><li><a href="" class="weibo"></a> <a href="" class="weixin"></a></li></ul><h3>支付方式</h3><ul><li><img src="img/footer-new-1.png"> <img src="img/footer-new-2.png"> <img src="img/footer-new-3.png"></li></ul></div></div><div class="subscription clear"><h3>订阅电子期刊</h3><div class="emainl-singup"><form action=""><input type="text" placeholder="sample@email.com"> <input type="submit" value="立即订阅"></form></div></div><div class="footer-bottom clear"><ul><li class="fl"><a href="" class="privacy">隐私条款</a></li><li class="fl"><a href="" class="condition">条件条款</a></li><li class="fl last">© 雅诗兰黛(上海)商贸有限公司版权所有。 <a href="">沪ICP备08005263号</a> <a href=""><img src="img/aic_icon.png"> </a>&nbsp;沪公网安备 31010602004727号 <a href=""><img src="img/gongan.png"></a></li></ul></div></footer></body></html><script src="js/jquery-3.2.1.min.js"></script><script src="js/cookieTools.js"></script><script>//单击+
    function add(addBtn) {

        //修改前端
        //1.把数量加一
        let count = parseFloat(addBtn.previousElementSibling.innerHTML);
        count++;
        addBtn.previousElementSibling.innerHTML = count;

        //2.小计
        let price = parseFloat(addBtn.parentNode.nextElementSibling.innerHTML);
        let money = price * count;
        addBtn.parentNode.nextElementSibling.nextElementSibling.innerHTML = money;

        //3.合计
        totalMoney();

        let vipName = getCookie("username");
        let goodsId = $(addBtn).attr("data-id");
        let goodsCount = addBtn.previousElementSibling.innerHTML;
        //先修改后端
        $.get("updateGoodsCount.php", {
            "vipName": vipName,
            "goodsId": goodsId,
            "goodsCount": goodsCount
        })


    }

    //单击-
    function reduce(reduceBtn) {
        //1.把数量减一
        let count = parseFloat(reduceBtn.nextElementSibling.innerHTML);
        if (count > 0) {
            count--;
        }
        reduceBtn.nextElementSibling.innerHTML = count;

        //2.小计
        let price = parseFloat(reduceBtn.parentNode.nextElementSibling.innerHTML);
        let money = price * count;
        reduceBtn.parentNode.nextElementSibling.nextElementSibling.innerHTML = money;

        //3.合计
        totalMoney();

        let vipName = getCookie("username");
        let goodsId = $(reduceBtn).attr("data-id");
        let goodsCount = reduceBtn.nextElementSibling.innerHTML;
        //先修改后端
        $.get("updateGoodsCount.php", {
            "vipName": vipName,
            "goodsId": goodsId,
            "goodsCount": goodsCount
        })
    }

    //合计
    function totalMoney() {
        let tdDoms = document.getElementsByClassName("cart-item-zongji");
        let total = 0;
        for (let i = 0; i < tdDoms.length; i++) {
            total += parseFloat(tdDoms[i].innerHTML);
        }
        document.getElementById("totalMoney").innerHTML = total;
    }

    //删除
    function deleteGoods(deleteBtn) {

        if (confirm("亲，您确定要删除吗？")) {
            let vipName = getCookie("username");
            let goodsId = $(deleteBtn).attr("data-id");
            //1.先删除后端
            $.get("deleteGoods.php", {
                "vipName": vipName,
                "goodsId": goodsId
            })

            //2.删除前端
            deleteBtn.parentNode.parentNode.parentNode.remove();
            totalMoney();



        }
    }

    function shouData(data) {
        let arr = JSON.parse(data);
        let htmlStr = "";
        let money = 0; //总金额
        arr.forEach(element => {
            let currmoney = element.goodsPrice * element.goodsCount;
            money += currmoney;
            htmlStr += `
                <div class="cart-item clear">
                    <div class="clear"> 
                            <div class="cart-item-product clear">
                                
                                    <img src="${element.goodsImg}" />
                                
                            </div>
                            <div class="cart-item-miaoshu">
                                <div>
                                    ${element.goodsDesc}
                                </div>
                                <div class="one">
                                    ${element.goodsName}
                                </div>
                                <div>
                                    <span>容量: ${element.beiyong1}</span>
                                </div>
                                <div class="two">
                                    <input class="deleteCls remove" type="button" value="移除" data-id="${element.goodsId}"/>
                                </div>
                            </div>
                            <div class="cart-item-count">
                                <input class="reduceCls" type="button" value="－" data-id="${element.goodsId}" />
                                <span>${element.goodsCount}</span>
                                <input class="addCls" type="button" value="＋" data-id="${element.goodsId}" />
                            </div>
                            <div class="cart-item-price">
                                ${element.goodsPrice}
                            </div>
                            <div class="cart-item-zongji">
                                ${currmoney}
                            </div>
                    </div>
                </div>
            `;
        });
        htmlStr += `
            <div class="xiahuaxian clear">

            </div>
            <div class="cart-items-bottom">
                <div class="left1">
                    优惠代码
                    <input type="text" class="text01" />
                    <input type="button" value="确认优惠代码" class="btn01" />
                    <br />
                    <br />
                    <p>每张订单只能使用一个优惠代码</p>
                </div>
                <div class="right1 fr">
                    小计:<span id="totalMoney">${money}</span>
                </div>
            </div>
            <div class="bottom-viewcart-buttons">
                <a href="shoppinglist.html" class="shopping">继续购物</a>
                <span>或</span>
                <a href="" class="money1">继续结账</a>
            </div>
            `
        $(".nullshopping").append(htmlStr);
    }

    function bindEvent() {
        $(".addCls").click(function() {
            add(this);
        });
        $(".reduceCls").click(function() {
            reduce(this);
        });
        $(".deleteCls").click(function() {
            deleteGoods(this);
        });
    }

    function initUI() {
        let username = getCookie("username");
        if (username) {
            $("#usernameSpan").html(username);
            $("#welcomeBox").css({
                "display": "block"
            });
            $("#loginBox").css({
                "display": "none"
            });
        } else {
            $("#loginBox").css({
                "display": "block"
            });
            $("#welcomeBox").css({
                "display": "none"
            });
        }
    }
    //页面加载完成
    $(function() {
        let vipName = getCookie("username")
        $.get("getShoppingCart.php", {
            "vipName": vipName
        }, function(data) {
            shouData(data);
            bindEvent();
            initUI();
            $("#btnLogout").click(function() {
                removeCookie("username");
                initUI();
            });
        })
        $("#loginBox").click(function() {
            location.href = "register.html"
        })
    })</script>